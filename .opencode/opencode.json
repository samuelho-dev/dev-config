{
  "$schema": "https://opencode.ai/config.json",

  // ============================================================
  // dev-config OpenCode policy:
  // - Strict enforcement of structural search / lint / refactor via GritQL
  // - Repo-local plugins loaded from: .opencode/plugin/
  //
  // IMPORTANT:
  // - This repository enforces the `gritql` tool as the only supported way
  //   to search/lint/modify code.
  // - Non-structural search (grep/rg) and ad-hoc mutation (sed/perl/python -c)
  //   are blocked by the repo plugin: .opencode/plugin/gritql-guardrails.ts
  // ============================================================

  "project": {
    "name": "dev-config"
  },

  // Keep defaults lightweight; enforcement happens via plugin.
  "autoupdate": true,

  // Optional: set preferred models here if you want deterministic defaults.
  // "model": "anthropic/claude-sonnet-4-20250514",
  // "small_model": "anthropic/claude-haiku-4-20250514",

  // ============================================================
  // Tooling / Workflow Guidance (LLM-facing)
  // ============================================================
  "instructions": [
    "STRICT POLICY: Use structural GritQL only. All code search, linting, and refactoring must go through the `gritql` tool.",
    "WORKFLOW: 1) gritql check (dry-run) -> 2) review structured results/diff -> 3) gritql apply (explicit confirm) -> 4) biome check / nix checks as applicable.",
    "DO NOT use: rg, grep, sed, perl -pi, python -c, node -e, jscodeshift, or patch application tools for code modification. These are blocked."
  ]

  // ============================================================
  // Plugins
  // ============================================================
  // Plugins are automatically loaded from `.opencode/plugin/` per OpenCode docs.
  // This repository includes:
  // - `.opencode/plugin/gritql-guardrails.ts` (strict enforcement)
  //
  // If your OpenCode version supports explicit plugin declarations in config,
  // add them here. Otherwise, keep relying on auto-loading via directory.
  //
  // "plugins": ["gritql-guardrails"]
}
