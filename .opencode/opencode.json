{
  "$schema": "https://opencode.ai/config.json",
  "plugin": [
    "./plugin/nx-guardrails.ts"
  ],
  "autoupdate": true,
  "permission": {
    "edit": "allow",
    "bash": "allow",
    "webfetch": "allow",
    "doom_loop": "ask",
    "external_directory": "allow"
  },
  "instructions": [
    "All standard tools are available: grep, glob, find, read, edit, write, bash, webfetch, todowrite, todoread.",
    "Optional: Use @gritql for structural code search and transformations via GritQL patterns.",
    "Optional: Use @mlg for Effect-TS library scaffolding in Nx monorepos.",
    "",
    "oh-my-opencode Multi-Agent System (configured via Nix):",
    "- @Sisyphus: Main orchestrator (Claude Opus 4.5 with extended thinking, 32k budget)",
    "- @oracle: Architecture & debugging specialist (OpenRouter fallback)",
    "- @librarian: Codebase analysis & documentation expert (Claude Sonnet 4.5)",
    "- @explore: Fast file traversal & pattern matching (Grok 3 via OpenRouter - free)",
    "- @frontend-ui-ux-engineer: UI/UX design specialist (Gemini 3 Pro via OpenRouter)",
    "- @document-writer: Technical writing expert (Gemini 3 Flash via OpenRouter)",
    "- @multimodal-looker: Image/PDF analysis (Gemini 2.5 Flash via OpenRouter)",
    "",
    "Background Agents: Use 'Have @agent1 do X while @agent2 does Y' for parallel execution.",
    "Built-in MCPs: context7 (official docs), websearch_exa (web search), grep_app (GitHub code search).",
    "LSP Tools Available: lsp_hover, lsp_goto_definition, lsp_find_references, lsp_rename, lsp_code_actions.",
    "AST-Grep Tools: ast_grep_search, ast_grep_replace for structural code transformations.",
    "",
    "Keyword Shortcuts:",
    "- 'ultrawork' / 'ulw': Maximum performance mode with parallel agent orchestration",
    "- 'search' / 'find': Maximized search with parallel explore and librarian agents",
    "- 'analyze' / 'investigate': Deep analysis with multi-phase expert consultation",
    "- 'ultrathink': Extended thinking mode for complex reasoning",
    "",
    "Additional Plugins:",
    "- @franlol/opencode-md-table-formatter: Automatically formats markdown tables after AI completion",
    "  * Supports left/center/right alignment (:---, :---:, ---:)",
    "  * Concealment mode compatible (correctly calculates widths when markdown symbols hidden)",
    "  * Handles bold/italic/strikethrough, inline code, emojis, unicode",
    "  * Silent operation with validation feedback for invalid tables"
  ]
}
