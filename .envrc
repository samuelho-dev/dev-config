# shellcheck shell=bash
# direnv configuration for automatic Nix environment activation
# Automatically loads dev environment when entering dev-config directory

# Use nix-direnv for caching (100x faster after first load)
if ! has nix_direnv_version || ! nix_direnv_version 2.3.0; then
  source_url "https://raw.githubusercontent.com/nix-community/nix-direnv/2.3.0/direnvrc" "sha256-Dmd+j63L84wuzgyjITIfSxSD57Tx7v51DMxVZOsiUD8="
fi

# Use Nix flake development shell
use flake

# Auto-load AI credentials from 1Password (if authenticated)
if command -v op &>/dev/null && op account get &>/dev/null 2>&1; then
  # Only load if in dev-config directory
  source_env scripts/load-ai-credentials.sh
else
  echo "ðŸ’¡ Tip: Sign in to 1Password (op signin) for auto-loaded AI credentials"
fi
