---
# Hadolint Configuration
# Strict Dockerfile linting
# https://github.com/hadolint/hadolint

# Fail on warnings and errors
failure-threshold: warning

# Rule overrides
override:
  error:
    # Image version pinning
    - DL3006  # Always tag the version of an image explicitly
    - DL3007  # Using latest is prone to errors

    # Package version pinning
    - DL3008  # Pin versions in apt get install
    - DL3013  # Pin versions in pip install
    - DL3016  # Pin versions in npm install
    - DL3018  # Pin versions in apk add
    - DL3028  # Pin versions in gem install

    # File operations
    - DL3045  # COPY to a relative destination without WORKDIR set

    # Security
    - DL3002  # Last USER should not be root
    - DL3004  # Do not use sudo

  warning:
    # Best practices
    - DL3003  # Use WORKDIR instead of cd
    - DL3009  # Delete apt-get lists after installing
    - DL3015  # Avoid additional packages with apt-get install
    - DL3020  # Use COPY instead of ADD for files

# Rules to ignore completely (top-level, not inside override)
ignored:
  # Shell form is sometimes intentional
  - DL3025  # Use arguments JSON notation for CMD and ENTRYPOINT

# Trusted registries (won't warn about these)
trustedRegistries:
  - docker.io
  - gcr.io
  - ghcr.io
  - quay.io
  - registry.k8s.io
  - public.ecr.aws

# Label schema enforcement
label-schema:
  author: text
  version: semver
  maintainer: email
